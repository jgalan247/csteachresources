<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embedded Systems Quiz - CS Learning</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/components.css">
    <style>
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .question-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-lg);
            box-shadow: var(--shadow-md);
        }
        .question-number {
            color: var(--theory);
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }
        .question-text {
            font-size: 1.1rem;
            margin-bottom: var(--space-lg);
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }
        .option {
            display: flex;
            align-items: center;
            padding: var(--space-md);
            background: var(--gray-50);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        .option:hover {
            border-color: var(--theory);
            background: var(--theory-light);
        }
        .option.selected {
            border-color: var(--theory);
            background: var(--theory-light);
        }
        .option.correct {
            border-color: var(--success);
            background: var(--success-light);
        }
        .option.incorrect {
            border-color: var(--error);
            background: var(--error-light);
        }
        .option input {
            margin-right: var(--space-md);
        }
        .feedback {
            margin-top: var(--space-md);
            padding: var(--space-md);
            border-radius: var(--radius-md);
            display: none;
        }
        .feedback.show {
            display: block;
        }
        .feedback.correct {
            background: var(--success-light);
            color: var(--success);
            border: 1px solid var(--success);
        }
        .feedback.incorrect {
            background: var(--error-light);
            color: var(--error);
            border: 1px solid var(--error);
        }
        .results {
            background: var(--theory-light);
            border: 2px solid var(--theory);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            text-align: center;
            display: none;
        }
        .results.show {
            display: block;
        }
        .score {
            font-size: 3rem;
            font-weight: bold;
            color: var(--theory-dark);
        }
        .theory-hero {
            background: linear-gradient(135deg, var(--theory-light) 0%, white 100%);
        }
    </style>
</head>
<body>
    <nav class="main-nav">
        <div class="nav-brand">
            <span class="logo">üñ•Ô∏è</span>
            <span class="brand-text">CS Learning</span>
        </div>
        <ul class="nav-links">
            <li><a href="../../index.html">Home</a></li>
            <li><a href="../index.html">Topics</a></li>
            <li><a href="../../progress.html">My Progress</a></li>
            <li><a href="../../help.html">Help</a></li>
        </ul>
    </nav>

    <main class="container">
        <header class="hero theory-hero">
            <a href="index.html" style="color: var(--theory); text-decoration: none;">‚Üê Back to CPU</a>
            <h1>Embedded Systems Quiz</h1>
            <p class="hero-subtitle">Test your understanding of embedded systems</p>
        </header>

        <div class="quiz-container">
            <!-- Question 1 -->
            <div class="question-card" data-question="1" data-correct="b">
                <div class="question-number">Question 1 of 8</div>
                <div class="question-text">What is an embedded system?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q1" value="a">
                        <span>A computer that is hidden under a desk</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="b">
                        <span>A computer system built into a device to perform a specific function</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="c">
                        <span>A laptop that can run many different programs</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="d">
                        <span>A smartphone with apps installed</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 2 -->
            <div class="question-card" data-question="2" data-correct="c">
                <div class="question-number">Question 2 of 8</div>
                <div class="question-text">Which of these is a characteristic of embedded systems?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q2" value="a">
                        <span>They can run many different programs</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="b">
                        <span>Users can install new software on them</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="c">
                        <span>They perform a single, dedicated function</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="d">
                        <span>They always have a keyboard and screen</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 3 -->
            <div class="question-card" data-question="3" data-correct="a">
                <div class="question-number">Question 3 of 8</div>
                <div class="question-text">Which of these is an example of an embedded system?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q3" value="a">
                        <span>The controller in a washing machine</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="b">
                        <span>A desktop PC running Windows</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="c">
                        <span>A laptop running multiple applications</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="d">
                        <span>A tablet with apps from an app store</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 4 -->
            <div class="question-card" data-question="4" data-correct="d">
                <div class="question-number">Question 4 of 8</div>
                <div class="question-text">Why must embedded systems in cars (like airbag controllers) be "real-time" systems?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q4" value="a">
                        <span>Because they need to display the current time</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="b">
                        <span>Because they must be connected to the internet</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="c">
                        <span>Because they run 24 hours a day</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="d">
                        <span>Because they must respond immediately within a guaranteed time frame</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 5 -->
            <div class="question-card" data-question="5" data-correct="b">
                <div class="question-number">Question 5 of 8</div>
                <div class="question-text">What is "firmware"?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q5" value="a">
                        <span>The physical case of an embedded system</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="b">
                        <span>Permanent software programmed into an embedded system's memory</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="c">
                        <span>Software that can be downloaded from the internet</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="d">
                        <span>The hardware components inside a computer</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 6 -->
            <div class="question-card" data-question="6" data-correct="c">
                <div class="question-number">Question 6 of 8</div>
                <div class="question-text">Why is low power consumption important for embedded systems?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q6" value="a">
                        <span>Because they need to be quiet</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="b">
                        <span>Because they have large screens</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="c">
                        <span>Because many run on batteries or need to operate continuously</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="d">
                        <span>Because they connect to the cloud</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 7 -->
            <div class="question-card" data-question="7" data-correct="a">
                <div class="question-number">Question 7 of 8</div>
                <div class="question-text">What is the main difference between an embedded system and a general-purpose computer?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q7" value="a">
                        <span>Embedded systems perform one specific function; general-purpose computers run many programs</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="b">
                        <span>Embedded systems are always larger than general-purpose computers</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="c">
                        <span>General-purpose computers cannot connect to the internet</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="d">
                        <span>Embedded systems always cost more than general-purpose computers</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 8 -->
            <div class="question-card" data-question="8" data-correct="d">
                <div class="question-number">Question 8 of 8</div>
                <div class="question-text">Why must a pacemaker (heart monitor) embedded system be extremely reliable?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q8" value="a">
                        <span>Because it needs to display information on a screen</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q8" value="b">
                        <span>Because it runs many different applications</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q8" value="c">
                        <span>Because it needs regular software updates</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q8" value="d">
                        <span>Because a failure could be life-threatening - it cannot crash or need rebooting</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="results">
                <h2>Quiz Complete!</h2>
                <div class="score">0/8</div>
                <p class="score-message"></p>
                <button class="btn btn-primary mt-lg" onclick="resetQuiz()">Try Again</button>
                <a href="index.html" class="btn btn-secondary mt-lg">Back to Topic</a>
            </div>

            <button class="btn btn-primary btn-lg" id="checkAnswers" style="width: 100%;">Check Answers</button>
        </div>
    </main>

    <footer class="main-footer">
        <p>Built on evidence-based teaching methods from computing education research.</p>
    </footer>

    <script src="../../js/progress.js"></script>
    <script>
        const correctAnswers = {
            1: { answer: 'b', explanation: 'An embedded system is a computer system built into a larger device to perform ONE specific, dedicated function.' },
            2: { answer: 'c', explanation: 'Embedded systems are designed to perform a single, dedicated function - unlike general-purpose computers that can run many programs.' },
            3: { answer: 'a', explanation: 'A washing machine controller is an embedded system - it\'s built into the washing machine and only controls wash cycles. PCs, laptops, and tablets are general-purpose computers.' },
            4: { answer: 'd', explanation: 'Real-time systems must respond to inputs within a guaranteed time frame. An airbag must deploy in milliseconds during a crash - any delay could be fatal.' },
            5: { answer: 'b', explanation: 'Firmware is permanent software programmed into an embedded system\'s memory, usually stored in ROM or flash memory. Users cannot change it.' },
            6: { answer: 'c', explanation: 'Many embedded systems run on batteries (watches, fitness trackers) or need to operate continuously (thermostats, security systems), so low power consumption is essential.' },
            7: { answer: 'a', explanation: 'The key difference is that embedded systems perform ONE specific function (like controlling a washing machine), while general-purpose computers can run many different programs.' },
            8: { answer: 'd', explanation: 'A pacemaker is a life-critical medical device. If it crashed or needed rebooting, the patient could die. It must work reliably 24/7 without failure.' }
        };

        document.getElementById('checkAnswers').addEventListener('click', function() {
            let score = 0;
            const questions = document.querySelectorAll('.question-card');

            questions.forEach(card => {
                const qNum = card.dataset.question;
                const selected = card.querySelector('input:checked');
                const feedback = card.querySelector('.feedback');
                const options = card.querySelectorAll('.option');

                options.forEach(opt => {
                    opt.classList.remove('correct', 'incorrect', 'selected');
                });

                if (selected) {
                    const selectedOption = selected.closest('.option');
                    const correctValue = correctAnswers[qNum].answer;

                    if (selected.value === correctValue) {
                        score++;
                        selectedOption.classList.add('correct');
                        feedback.textContent = '‚úì Correct! ' + correctAnswers[qNum].explanation;
                        feedback.className = 'feedback show correct';
                    } else {
                        selectedOption.classList.add('incorrect');
                        options.forEach(opt => {
                            if (opt.querySelector('input').value === correctValue) {
                                opt.classList.add('correct');
                            }
                        });
                        feedback.textContent = '‚úó ' + correctAnswers[qNum].explanation;
                        feedback.className = 'feedback show incorrect';
                    }
                } else {
                    feedback.textContent = 'Please select an answer.';
                    feedback.className = 'feedback show incorrect';
                }
            });

            const results = document.querySelector('.results');
            results.classList.add('show');
            results.querySelector('.score').textContent = score + '/8';

            const message = results.querySelector('.score-message');
            if (score === 8) {
                message.textContent = 'Perfect! You really understand embedded systems!';
            } else if (score >= 6) {
                message.textContent = 'Good job! Review the questions you got wrong.';
            } else if (score >= 4) {
                message.textContent = 'Keep practicing! Go back and review the material.';
            } else {
                message.textContent = 'You need more practice. Read through the Learn section again.';
            }

            document.getElementById('checkAnswers').style.display = 'none';

            if (typeof saveProgress === 'function') {
                saveProgress('cpu-embedded-quiz', score === 8 ? 100 : Math.round((score / 8) * 100));
            }
        });

        function resetQuiz() {
            document.querySelectorAll('input[type="radio"]').forEach(input => {
                input.checked = false;
            });

            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect', 'selected');
            });

            document.querySelectorAll('.feedback').forEach(fb => {
                fb.classList.remove('show');
            });

            document.querySelector('.results').classList.remove('show');
            document.getElementById('checkAnswers').style.display = 'block';
        }
    </script>
</body>
</html>
