<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPU Quiz - Computer Science Learning</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/components.css">
    <style>
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .question-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-lg);
            box-shadow: var(--shadow-md);
        }
        .question-number {
            color: var(--theory);
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }
        .question-text {
            font-size: 1.1rem;
            margin-bottom: var(--space-lg);
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }
        .option {
            display: flex;
            align-items: center;
            padding: var(--space-md);
            background: var(--gray-50);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        .option:hover {
            border-color: var(--theory);
            background: var(--theory-light);
        }
        .option.selected {
            border-color: var(--theory);
            background: var(--theory-light);
        }
        .option.correct {
            border-color: var(--success);
            background: var(--success-light);
        }
        .option.incorrect {
            border-color: var(--error);
            background: var(--error-light);
        }
        .option input {
            margin-right: var(--space-md);
        }
        .feedback {
            margin-top: var(--space-md);
            padding: var(--space-md);
            border-radius: var(--radius-md);
            display: none;
        }
        .feedback.show {
            display: block;
        }
        .feedback.correct {
            background: var(--success-light);
            color: var(--success);
            border: 1px solid var(--success);
        }
        .feedback.incorrect {
            background: var(--error-light);
            color: var(--error);
            border: 1px solid var(--error);
        }
        .results {
            background: var(--theory-light);
            border: 2px solid var(--theory);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            text-align: center;
            display: none;
        }
        .results.show {
            display: block;
        }
        .score {
            font-size: 3rem;
            font-weight: bold;
            color: var(--theory-dark);
        }
        .theory-hero {
            background: linear-gradient(135deg, var(--theory-light) 0%, white 100%);
        }
    </style>
</head>
<body>
    <nav class="main-nav">
        <div class="nav-brand">
            <span class="logo">üñ•Ô∏è</span>
            <span class="brand-text">CS Learning</span>
        </div>
        <ul class="nav-links">
            <li><a href="../../index.html">Home</a></li>
            <li><a href="../index.html">Topics</a></li>
            <li><a href="../../progress.html">My Progress</a></li>
            <li><a href="../../help.html">Help</a></li>
        </ul>
    </nav>

    <main class="container">
        <header class="hero theory-hero">
            <a href="index.html" style="color: var(--theory); text-decoration: none;">‚Üê Back to CPU</a>
            <h1>CPU Quiz</h1>
            <p class="hero-subtitle">Test your understanding of the CPU and Fetch-Execute Cycle</p>
        </header>

        <div class="quiz-container">
            <!-- Question 1 -->
            <div class="question-card" data-question="1" data-correct="c">
                <div class="question-number">Question 1 of 6</div>
                <div class="question-text">What does CPU stand for?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q1" value="a">
                        <span>Computer Processing Unit</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="b">
                        <span>Central Program Unit</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="c">
                        <span>Central Processing Unit</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="d">
                        <span>Core Processing Unit</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 2 -->
            <div class="question-card" data-question="2" data-correct="b">
                <div class="question-number">Question 2 of 6</div>
                <div class="question-text">Which part of the CPU performs calculations?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q2" value="a">
                        <span>Control Unit</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="b">
                        <span>ALU (Arithmetic Logic Unit)</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="c">
                        <span>Registers</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="d">
                        <span>RAM</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 3 -->
            <div class="question-card" data-question="3" data-correct="a">
                <div class="question-number">Question 3 of 6</div>
                <div class="question-text">What is the correct order of the Fetch-Execute Cycle?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q3" value="a">
                        <span>Fetch ‚Üí Decode ‚Üí Execute ‚Üí Store</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="b">
                        <span>Decode ‚Üí Fetch ‚Üí Execute ‚Üí Store</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="c">
                        <span>Fetch ‚Üí Execute ‚Üí Decode ‚Üí Store</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="d">
                        <span>Execute ‚Üí Fetch ‚Üí Store ‚Üí Decode</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 4 -->
            <div class="question-card" data-question="4" data-correct="c">
                <div class="question-number">Question 4 of 6</div>
                <div class="question-text">What does the Control Unit do?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q4" value="a">
                        <span>Performs arithmetic calculations</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="b">
                        <span>Stores data permanently</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="c">
                        <span>Coordinates and manages all CPU operations</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="d">
                        <span>Displays output on the screen</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 5 -->
            <div class="question-card" data-question="5" data-correct="b">
                <div class="question-number">Question 5 of 6</div>
                <div class="question-text">Where does the CPU fetch instructions from?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q5" value="a">
                        <span>Hard Drive</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="b">
                        <span>RAM (Main Memory)</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="c">
                        <span>Registers</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="d">
                        <span>The Monitor</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <!-- Question 6 -->
            <div class="question-card" data-question="6" data-correct="d">
                <div class="question-number">Question 6 of 6</div>
                <div class="question-text">What are registers?</div>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q6" value="a">
                        <span>Large storage devices for files</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="b">
                        <span>Input devices like keyboards</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="c">
                        <span>Programs that register your computer</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="d">
                        <span>Tiny, super-fast memory locations inside the CPU</span>
                    </label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="results">
                <h2>Quiz Complete!</h2>
                <div class="score">0/6</div>
                <p class="score-message"></p>
                <button class="btn btn-primary mt-lg" onclick="resetQuiz()">Try Again</button>
                <a href="index.html" class="btn btn-secondary mt-lg">Back to Topic</a>
            </div>

            <button class="btn btn-primary btn-lg" id="checkAnswers" style="width: 100%;">Check Answers</button>
        </div>
    </main>

    <footer class="main-footer">
        <p>Built on evidence-based teaching methods from computing education research.</p>
    </footer>

    <script src="../../js/progress.js"></script>
    <script>
        const correctAnswers = {
            1: { answer: 'c', explanation: 'CPU stands for Central Processing Unit - the "brain" of the computer.' },
            2: { answer: 'b', explanation: 'The ALU (Arithmetic Logic Unit) performs all calculations and logical comparisons.' },
            3: { answer: 'a', explanation: 'The correct order is Fetch ‚Üí Decode ‚Üí Execute ‚Üí Store.' },
            4: { answer: 'c', explanation: 'The Control Unit coordinates and manages all operations in the CPU.' },
            5: { answer: 'b', explanation: 'Instructions are fetched from RAM (main memory) where programs are stored while running.' },
            6: { answer: 'd', explanation: 'Registers are tiny, super-fast memory locations inside the CPU that hold data being processed.' }
        };

        document.getElementById('checkAnswers').addEventListener('click', function() {
            let score = 0;
            const questions = document.querySelectorAll('.question-card');

            questions.forEach(card => {
                const qNum = card.dataset.question;
                const selected = card.querySelector('input:checked');
                const feedback = card.querySelector('.feedback');
                const options = card.querySelectorAll('.option');

                // Remove previous states
                options.forEach(opt => {
                    opt.classList.remove('correct', 'incorrect', 'selected');
                });

                if (selected) {
                    const selectedOption = selected.closest('.option');
                    const correctValue = correctAnswers[qNum].answer;

                    if (selected.value === correctValue) {
                        score++;
                        selectedOption.classList.add('correct');
                        feedback.textContent = '‚úì Correct! ' + correctAnswers[qNum].explanation;
                        feedback.className = 'feedback show correct';
                    } else {
                        selectedOption.classList.add('incorrect');
                        // Highlight correct answer
                        options.forEach(opt => {
                            if (opt.querySelector('input').value === correctValue) {
                                opt.classList.add('correct');
                            }
                        });
                        feedback.textContent = '‚úó ' + correctAnswers[qNum].explanation;
                        feedback.className = 'feedback show incorrect';
                    }
                } else {
                    feedback.textContent = 'Please select an answer.';
                    feedback.className = 'feedback show incorrect';
                }
            });

            // Show results
            const results = document.querySelector('.results');
            results.classList.add('show');
            results.querySelector('.score').textContent = score + '/6';

            const message = results.querySelector('.score-message');
            if (score === 6) {
                message.textContent = 'Perfect! You really understand the CPU!';
            } else if (score >= 4) {
                message.textContent = 'Good job! Review the questions you got wrong.';
            } else {
                message.textContent = 'Keep learning! Go back and review the material.';
            }

            // Hide check button
            document.getElementById('checkAnswers').style.display = 'none';

            // Save progress
            if (typeof saveProgress === 'function') {
                saveProgress('cpu-quiz', score === 6 ? 100 : Math.round((score / 6) * 100));
            }
        });

        function resetQuiz() {
            // Clear all selections
            document.querySelectorAll('input[type="radio"]').forEach(input => {
                input.checked = false;
            });

            // Remove all classes
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect', 'selected');
            });

            // Hide feedback
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.classList.remove('show');
            });

            // Hide results
            document.querySelector('.results').classList.remove('show');

            // Show check button
            document.getElementById('checkAnswers').style.display = 'block';
        }
    </script>
</body>
</html>
