<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Check - Operating Systems</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/components.css">
    <style>
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .question-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-lg);
            box-shadow: var(--shadow-md);
        }
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-md);
        }
        .question-number {
            background: var(--primary);
            color: white;
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            font-weight: bold;
            font-size: 0.9rem;
        }
        .question-text {
            font-size: 1.1rem;
            color: var(--gray-800);
            margin-bottom: var(--space-lg);
            line-height: 1.5;
        }
        .options-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .option-item {
            margin-bottom: var(--space-sm);
        }
        .option-label {
            display: flex;
            align-items: flex-start;
            padding: var(--space-md);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option-label:hover {
            border-color: var(--primary);
            background: var(--gray-50);
        }
        .option-label input {
            margin-right: var(--space-md);
            margin-top: 3px;
        }
        .option-label.selected {
            border-color: var(--primary);
            background: #e7f3ff;
        }
        .option-label.correct {
            border-color: var(--success);
            background: #d4edda;
        }
        .option-label.incorrect {
            border-color: var(--error);
            background: #f8d7da;
        }
        .option-label.disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }
        .feedback-box {
            margin-top: var(--space-md);
            padding: var(--space-md);
            border-radius: var(--radius-md);
            display: none;
        }
        .feedback-box.correct {
            display: block;
            background: #d4edda;
            color: #155724;
        }
        .feedback-box.incorrect {
            display: block;
            background: #f8d7da;
            color: #721c24;
        }
        .quiz-progress {
            background: white;
            padding: var(--space-lg);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-xl);
            box-shadow: var(--shadow-sm);
        }
        .progress-bar {
            height: 10px;
            background: var(--gray-200);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: var(--space-sm);
        }
        .progress-fill {
            height: 100%;
            background: var(--primary);
            transition: width 0.3s ease;
        }
        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray-600);
        }
        .quiz-results {
            background: white;
            padding: var(--space-xl);
            border-radius: var(--radius-lg);
            text-align: center;
            margin-top: var(--space-xl);
            display: none;
        }
        .quiz-results.show {
            display: block;
        }
        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
            margin: var(--space-lg) 0;
        }
        .score-display.excellent { color: var(--success); }
        .score-display.good { color: #f0ad4e; }
        .score-display.needs-work { color: var(--error); }
        .result-message {
            font-size: 1.2rem;
            color: var(--gray-700);
            margin-bottom: var(--space-lg);
        }
        .retry-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: var(--space-md) var(--space-xl);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 1rem;
            margin-right: var(--space-sm);
        }
        .retry-btn:hover {
            background: var(--primary-dark);
        }
        .category-badge {
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 10px;
            background: var(--gray-100);
            color: var(--gray-600);
        }
    </style>
</head>
<body>
    <nav class="main-nav">
        <div class="nav-brand">
            <span class="logo">üêç</span>
            <span class="brand-text">Python Learning</span>
        </div>
        <ul class="nav-links">
            <li><a href="../../index.html">Home</a></li>
            <li><a href="../index.html">Topics</a></li>
            <li><a href="../../progress.html">My Progress</a></li>
        </ul>
    </nav>

    <main class="container">
        <header class="topic-header">
            <a href="index.html" class="back-link">‚Üê Back to Operating Systems</a>
            <h1>Knowledge Check</h1>
            <p class="subtitle">Test your understanding of operating system functions</p>
        </header>

        <div class="quiz-progress">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
            <div class="progress-text">
                <span id="answered-count">0 of 15 answered</span>
                <span id="score-count">Score: 0</span>
            </div>
        </div>

        <div class="quiz-container" id="quiz-container">
            <!-- Questions populated by JavaScript -->
        </div>

        <div class="quiz-results" id="quiz-results">
            <h2>Quiz Complete!</h2>
            <div class="score-display" id="final-score">0%</div>
            <p class="result-message" id="result-message"></p>
            <button class="retry-btn" onclick="resetQuiz()">Try Again</button>
            <a href="index.html" class="retry-btn" style="background: var(--success); text-decoration: none;">Back to Topic</a>
        </div>
    </main>

    <script src="../../js/progress.js"></script>
    <script>
        const questions = [
            {
                id: 1,
                category: 'OS Basics',
                question: 'What is the primary purpose of an operating system?',
                options: [
                    'To create documents and spreadsheets',
                    'To manage hardware and provide services for applications',
                    'To connect to the internet',
                    'To store files permanently'
                ],
                correct: 1,
                explanation: 'The operating system manages computer hardware and provides an environment where applications can run. It acts as an intermediary between users, applications, and hardware.'
            },
            {
                id: 2,
                category: 'User Interface',
                question: 'Which of the following is an example of a Graphical User Interface (GUI)?',
                options: [
                    'Command Prompt where you type "dir" to list files',
                    'Windows desktop with icons, windows, and a Start menu',
                    'A text file containing commands',
                    'A programming language'
                ],
                correct: 1,
                explanation: 'A GUI uses Windows, Icons, Menus, and Pointers (WIMP) to allow visual interaction. The Windows desktop with its icons and menus is a classic example of a GUI.'
            },
            {
                id: 3,
                category: 'User Interface',
                question: 'Why might a system administrator prefer Command Line Interface (CLI) over GUI?',
                options: [
                    'CLI is easier to learn for beginners',
                    'CLI uses more system resources',
                    'CLI allows automation through scripts and is faster for repetitive tasks',
                    'CLI shows more graphics'
                ],
                correct: 2,
                explanation: 'CLI allows automation through scripting, is faster for experts, uses fewer resources, and can perform batch operations. A single command can do what might take many clicks in a GUI.'
            },
            {
                id: 4,
                category: 'Memory Management',
                question: 'What is the main role of memory management in an operating system?',
                options: [
                    'To permanently store files on the hard drive',
                    'To allocate and manage RAM for running applications',
                    'To display the user interface',
                    'To print documents'
                ],
                correct: 1,
                explanation: 'Memory management allocates RAM to programs, tracks memory usage, protects memory spaces, and deallocates memory when programs close. It enables multiple programs to run simultaneously.'
            },
            {
                id: 5,
                category: 'Memory Management',
                question: 'How does a single-core processor appear to run multiple programs simultaneously?',
                options: [
                    'It duplicates itself for each program',
                    'It uses time slicing - rapidly switching between programs',
                    'It sends programs to the cloud',
                    'It only runs one program at a time'
                ],
                correct: 1,
                explanation: 'Time slicing switches the CPU between programs many times per second. Each program gets a small "slice" of CPU time, creating the illusion of simultaneous execution.'
            },
            {
                id: 6,
                category: 'Memory Management',
                question: 'What happens when you open an application like Word?',
                options: [
                    'The program runs directly from the hard drive',
                    'The program is loaded from storage into RAM',
                    'The program is downloaded from the internet',
                    'The program is printed to paper'
                ],
                correct: 1,
                explanation: 'When you open an application, the OS loads the program code from secondary storage (HDD/SSD) into RAM. The CPU then executes the code from RAM, which is much faster than storage.'
            },
            {
                id: 7,
                category: 'Peripheral Management',
                question: 'What is a device driver?',
                options: [
                    'A person who delivers computer parts',
                    'A program that translates between the OS and specific hardware',
                    'The USB cable that connects devices',
                    'A type of hard drive'
                ],
                correct: 1,
                explanation: 'A driver is software that translates between the operating system and a specific hardware device. It allows the OS to communicate with devices without knowing their exact implementation.'
            },
            {
                id: 8,
                category: 'Peripheral Management',
                question: 'When you plug in a new USB device and Windows displays "Setting up device...", what is happening?',
                options: [
                    'The device is being charged',
                    'The OS is detecting the device and loading an appropriate driver',
                    'The device is scanning for viruses',
                    'Files are being copied from the device'
                ],
                correct: 1,
                explanation: 'The OS uses Plug and Play to detect new hardware, identify it, search for a matching driver, and load that driver so the device can be used. This is peripheral management in action.'
            },
            {
                id: 9,
                category: 'Peripheral Management',
                question: 'What is the purpose of a buffer in peripheral management (e.g., print queue)?',
                options: [
                    'To make the printer work faster',
                    'To temporarily hold data while slower devices catch up',
                    'To encrypt documents before printing',
                    'To compress files'
                ],
                correct: 1,
                explanation: 'Buffers temporarily store data because peripherals (like printers) are much slower than the CPU. The print queue buffers documents so the computer can continue working while printing happens in the background.'
            },
            {
                id: 10,
                category: 'User Management',
                question: 'What is the "principle of least privilege" in user management?',
                options: [
                    'All users should have administrator access',
                    'Users should have only the minimum access needed for their tasks',
                    'Privileges should be randomly assigned',
                    'Only one person should be able to use the computer'
                ],
                correct: 1,
                explanation: 'Least privilege means giving users only the permissions they need - nothing more. This improves security by limiting damage from compromised accounts and preventing accidental changes.'
            },
            {
                id: 11,
                category: 'User Management',
                question: 'What does authentication mean in user management?',
                options: [
                    'Creating new user accounts',
                    'Verifying that a user is who they claim to be (e.g., password check)',
                    'Deleting old files',
                    'Installing software'
                ],
                correct: 1,
                explanation: 'Authentication is the process of verifying identity - typically by checking username and password against stored records. It ensures only authorised users can access the system.'
            },
            {
                id: 12,
                category: 'User Management',
                question: 'On a school network, a student cannot install games. Which user management feature prevents this?',
                options: [
                    'File extensions',
                    'Access rights and permissions',
                    'Memory allocation',
                    'Device drivers'
                ],
                correct: 1,
                explanation: 'Access rights control what users can do. Student accounts have restricted permissions that prevent software installation, while administrator accounts have this ability.'
            },
            {
                id: 13,
                category: 'File Management',
                question: 'What is a file extension (like .docx or .pdf)?',
                options: [
                    'A cable that extends file storage',
                    'A suffix that indicates the file type and associated application',
                    'A way to make files larger',
                    'A folder inside another folder'
                ],
                correct: 1,
                explanation: 'File extensions indicate the type of file and help the OS determine which application should open it. For example, .docx opens in Word and .pdf opens in a PDF reader.'
            },
            {
                id: 14,
                category: 'File Management',
                question: 'What is a file path like "C:\\Users\\John\\Documents\\report.docx"?',
                options: [
                    'The password for a file',
                    'The complete location of a file in the folder hierarchy',
                    'The size of a file',
                    'The date a file was created'
                ],
                correct: 1,
                explanation: 'A file path specifies the exact location of a file through the folder structure. It starts from the drive (C:) and follows through each folder to the file itself.'
            },
            {
                id: 15,
                category: 'File Management',
                question: 'When you "move" a file to another folder on the same drive, what usually happens?',
                options: [
                    'The file data is copied and the original is deleted',
                    'Only the reference/pointer to the file changes, not the actual data',
                    'The file is compressed',
                    'The file is encrypted'
                ],
                correct: 1,
                explanation: 'When moving within the same drive, the actual data often stays in the same physical location - only the file system reference changes. This is why moving is instant but copying takes time.'
            }
        ];

        let userAnswers = {};
        let score = 0;

        function initQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';

            questions.forEach((q, index) => {
                const card = createQuestionCard(q, index);
                container.appendChild(card);
            });

            updateProgress();
        }

        function createQuestionCard(question, index) {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `question-${index}`;

            card.innerHTML = `
                <div class="question-header">
                    <span class="question-number">Question ${question.id}</span>
                    <span class="category-badge">${question.category}</span>
                </div>
                <p class="question-text">${question.question}</p>
                <ul class="options-list">
                    ${question.options.map((option, i) => `
                        <li class="option-item">
                            <label class="option-label" id="option-${index}-${i}">
                                <input type="radio" name="question-${index}" value="${i}" onchange="selectAnswer(${index}, ${i})">
                                <span>${option}</span>
                            </label>
                        </li>
                    `).join('')}
                </ul>
                <div class="feedback-box" id="feedback-${index}">
                    <strong id="feedback-title-${index}"></strong>
                    <p id="feedback-text-${index}"></p>
                </div>
            `;

            return card;
        }

        function selectAnswer(questionIndex, optionIndex) {
            const question = questions[questionIndex];
            const wasAnswered = userAnswers[questionIndex] !== undefined;

            userAnswers[questionIndex] = optionIndex;

            const options = document.querySelectorAll(`input[name="question-${questionIndex}"]`);
            options.forEach(opt => {
                opt.disabled = true;
                opt.closest('.option-label').classList.add('disabled');
            });

            const selectedLabel = document.getElementById(`option-${questionIndex}-${optionIndex}`);
            selectedLabel.classList.add('selected');

            const isCorrect = optionIndex === question.correct;

            if (isCorrect) {
                selectedLabel.classList.add('correct');
                if (!wasAnswered) score++;
            } else {
                selectedLabel.classList.add('incorrect');
                const correctLabel = document.getElementById(`option-${questionIndex}-${question.correct}`);
                correctLabel.classList.add('correct');
            }

            const feedbackBox = document.getElementById(`feedback-${questionIndex}`);
            const feedbackTitle = document.getElementById(`feedback-title-${questionIndex}`);
            const feedbackText = document.getElementById(`feedback-text-${questionIndex}`);

            feedbackBox.className = `feedback-box ${isCorrect ? 'correct' : 'incorrect'}`;
            feedbackTitle.textContent = isCorrect ? 'Correct!' : 'Incorrect';
            feedbackText.textContent = question.explanation;

            updateProgress();
            checkCompletion();
        }

        function updateProgress() {
            const answered = Object.keys(userAnswers).length;
            const total = questions.length;
            const percentage = (answered / total) * 100;

            document.getElementById('progress-fill').style.width = `${percentage}%`;
            document.getElementById('answered-count').textContent = `${answered} of ${total} answered`;
            document.getElementById('score-count').textContent = `Score: ${score}`;
        }

        function checkCompletion() {
            if (Object.keys(userAnswers).length === questions.length) {
                setTimeout(showResults, 500);
            }
        }

        function showResults() {
            const percentage = Math.round((score / questions.length) * 100);
            const resultsDiv = document.getElementById('quiz-results');
            const scoreDisplay = document.getElementById('final-score');
            const resultMessage = document.getElementById('result-message');

            scoreDisplay.textContent = `${percentage}%`;
            scoreDisplay.className = 'score-display';

            if (percentage >= 80) {
                scoreDisplay.classList.add('excellent');
                resultMessage.textContent = `Excellent! You scored ${score} out of ${questions.length}. You have a strong understanding of operating systems!`;
            } else if (percentage >= 60) {
                scoreDisplay.classList.add('good');
                resultMessage.textContent = `Good job! You scored ${score} out of ${questions.length}. Review the explanations for questions you missed.`;
            } else {
                scoreDisplay.classList.add('needs-work');
                resultMessage.textContent = `You scored ${score} out of ${questions.length}. Consider reviewing the topic content and trying again.`;
            }

            resultsDiv.classList.add('show');
            Progress.saveActivity('operating-systems-quiz', 'completed', percentage);
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        function resetQuiz() {
            userAnswers = {};
            score = 0;
            document.getElementById('quiz-results').classList.remove('show');
            initQuiz();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.addEventListener('DOMContentLoaded', () => {
            initQuiz();
            Progress.startActivity('operating-systems-quiz', 'quiz');
        });
    </script>
</body>
</html>
