<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accumulator Pattern: For Loops - Python Learning</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/components.css">
</head>
<body>
    <nav class="main-nav">
        <div class="nav-brand">
            <span class="logo">üêç</span>
            <span class="brand-text">Python Learning</span>
        </div>
        <ul class="nav-links">
            <li><a href="../../index.html">Home</a></li>
            <li><a href="../index.html" class="active">Topics</a></li>
            <li><a href="../../progress.html">My Progress</a></li>
            <li><a href="../../help.html">Help</a></li>
        </ul>
    </nav>

    <main class="container-narrow">
        <nav class="breadcrumb">
            <a href="../../index.html">Home</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <a href="../index.html">Topics</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <a href="index.html">For Loops</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-current">Accumulator Pattern</span>
        </nav>

        <header class="mb-xl">
            <h1><span>‚ûï</span> The Accumulator Pattern</h1>
            <p>The accumulator pattern is a common programming technique for calculating totals, counting items, or building up results.</p>
        </header>

        <!-- Worked Example for Accumulator -->
        <div id="accumulator-example"></div>

        <section class="mt-xl">
            <h2>Practice: Trace the Accumulator</h2>
            <p>Now trace through this accumulator pattern to make sure you understand it.</p>
            <div id="accumulator-trace" class="mt-lg"></div>
        </section>

        <section class="mt-xl">
            <h2>Practice: Build Your Own</h2>
            <p>Arrange these blocks to calculate the sum of numbers 1 to 10.</p>
            <div id="accumulator-parsons" class="mt-lg"></div>
        </section>

        <div class="mt-xl">
            <a href="quiz.html" class="btn btn-primary">Next: Knowledge Quiz ‚Üí</a>
            <a href="parsons.html" class="btn btn-secondary">‚Üê Back to Parsons</a>
        </div>
    </main>

    <footer class="main-footer">
        <p>Built on evidence-based teaching methods from computing education research.</p>
    </footer>

    <script src="../../js/progress.js"></script>
    <script src="../../js/worked-example.js"></script>
    <script src="../../js/tracing.js"></script>
    <script src="../../js/parsons.js"></script>
    <script src="../../js/main.js"></script>
    <script>
        // Worked Example for Accumulator Pattern
        new WorkedExample(
            document.getElementById('accumulator-example'),
            {
                id: 'for-loops-accumulator-example',
                title: 'The Accumulator Pattern',
                topicId: 'for-loops',
                problem: {
                    statement: 'Calculate the sum of all numbers from 1 to 5.',
                    context: 'The answer should be 1 + 2 + 3 + 4 + 5 = 15'
                },
                subgoals: [
                    {
                        label: 'Set up the accumulator variable',
                        code: 'total = 0',
                        explanation: `Before we start adding numbers, we need somewhere to store our running total.

This variable is called an <strong>accumulator</strong> because it accumulates (collects) values over time.

We start at 0 because we haven't added anything yet. Think of it like setting a calculator to zero before you start.`,
                        misconceptions: [
                            {
                                wrongApproach: 'Not creating total before the loop',
                                whyWrong: 'If we try to use total inside the loop without creating it first, Python will give an error.',
                                correction: 'Always create the accumulator variable BEFORE the loop starts.'
                            },
                            {
                                wrongApproach: 'Starting total at 1',
                                whyWrong: 'Starting at 1 would give us 16 instead of 15 (we\'d be adding an extra 1).',
                                correction: 'For addition, always start the accumulator at 0.'
                            }
                        ]
                    },
                    {
                        label: 'Create the loop to visit each number',
                        code: 'for i in range(1, 6):',
                        explanation: `We use a for loop to visit each number from 1 to 5.

<strong>range(1, 6)</strong> gives us: 1, 2, 3, 4, 5

The variable <strong>i</strong> will hold each number in turn:
- First iteration: i = 1
- Second iteration: i = 2
- ... and so on until i = 5`,
                        misconceptions: [
                            {
                                wrongApproach: 'range(1, 5)',
                                whyWrong: 'This gives 1, 2, 3, 4 - missing the 5!',
                                correction: 'range() stops BEFORE the second number, so use range(1, 6) to include 5.'
                            }
                        ]
                    },
                    {
                        label: 'Update the accumulator inside the loop',
                        code: '    total = total + i',
                        explanation: `This is the key line - the <strong>accumulator pattern</strong>!

We take the current total, add the current number (i), and store the result back in total.

<strong>Step by step:</strong>
- When i = 1: total = 0 + 1 = 1
- When i = 2: total = 1 + 2 = 3
- When i = 3: total = 3 + 3 = 6
- When i = 4: total = 6 + 4 = 10
- When i = 5: total = 10 + 5 = 15

Each time through the loop, total grows by adding the current number.`,
                        misconceptions: [
                            {
                                wrongApproach: 'total = i',
                                whyWrong: 'This REPLACES total with i instead of adding. You\'d end up with just 5, not 15.',
                                correction: 'Use total = total + i to ADD to the existing total.'
                            },
                            {
                                wrongApproach: 'total = 0 inside the loop',
                                whyWrong: 'This would reset total to 0 every iteration! You\'d only get the last number.',
                                correction: 'Only set total = 0 BEFORE the loop, not inside it.'
                            }
                        ]
                    },
                    {
                        label: 'Output the final result',
                        code: 'print(total)',
                        explanation: `After the loop finishes, total contains our final answer: 15.

Notice this line is NOT indented - it's outside the loop. It only runs once, after all the additions are complete.

If we put print(total) inside the loop (indented), it would print after every addition, showing us 1, 3, 6, 10, 15.`
                    }
                ],
                completeCode: `# Set up the accumulator variable
total = 0

# Create the loop to visit each number
for i in range(1, 6):
    # Update the accumulator inside the loop
    total = total + i

# Output the final result
print(total)`,
                expectedOutput: '15'
            }
        );

        // Tracing exercise for accumulator
        new CodeTracing(
            document.getElementById('accumulator-trace'),
            {
                id: 'for-loops-accumulator-trace',
                title: 'Trace: Sum of 1 to 3',
                topicId: 'for-loops',
                code: `total = 0
for i in range(1, 4):
    total = total + i
print(total)`,
                variables: ['total', 'i'],
                includeOutput: true,
                prefilled: [0],
                solution: [
                    { step: 1, line: 1, variables: { total: 0, i: null }, output: '' },
                    { step: 2, line: 2, variables: { total: 0, i: 1 }, output: '' },
                    { step: 3, line: 3, variables: { total: 1, i: 1 }, output: '' },
                    { step: 4, line: 2, variables: { total: 1, i: 2 }, output: '' },
                    { step: 5, line: 3, variables: { total: 3, i: 2 }, output: '' },
                    { step: 6, line: 2, variables: { total: 3, i: 3 }, output: '' },
                    { step: 7, line: 3, variables: { total: 6, i: 3 }, output: '' },
                    { step: 8, line: 4, variables: { total: 6, i: 3 }, output: '6' }
                ]
            }
        );

        // Parsons problem for accumulator
        new ParsonsProblem(
            document.getElementById('accumulator-parsons'),
            {
                id: 'for-accumulator-parsons',
                topicId: 'for-loops',
                title: 'Calculate Sum of 1 to 10',
                instructions: 'Arrange the code blocks to calculate and print the sum of numbers 1 to 10. The answer should be 55.',
                expectedOutput: '55',
                blocks: [
                    { id: 1, code: 'total = 0', indentLevel: 0 },
                    { id: 2, code: 'for i in range(1, 11):', indentLevel: 0 },
                    { id: 3, code: 'total = total + i', indentLevel: 1 },
                    { id: 4, code: 'print(total)', indentLevel: 0 },
                    { id: 5, code: 'for i in range(10):', indentLevel: 0, isDistractor: true },
                    { id: 6, code: 'total = i', indentLevel: 1, isDistractor: true }
                ],
                solution: [1, 2, 3, 4],
                hints: [
                    'Start with total = 0',
                    'range(1, 11) gives numbers 1 to 10',
                    'Add i to total each time through the loop',
                    'Print the total after the loop ends'
                ],
                type: '2d'
            }
        );
    </script>
</body>
</html>
